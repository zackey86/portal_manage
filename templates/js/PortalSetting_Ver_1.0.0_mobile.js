(function () {
  "use strict";

  //半角数字で作成したアプリのIDを設定
  const APPID = 1;

  const renderingModel = { "name": "PortalSetting_Ver_1.0.0", "html": "<div class=\"designportal designportal-basic\" id=\"portal-img-key\">\n    <section class=\"basic-container\">\n      <h3 class=\"basic-heading1 basic-heading1--white\" id=\"app-header\"></h3>\n      <ul class=\"basic-appSet\" id=\"basic-app-list\">\n      </ul>\n    </section>\n    <section class=\"basic-container\">\n      <h3 class=\"basic-heading1 basic-heading1--white\" id=\"info-header\"></h3>\n      <div class=\"basic-dataSet\">\n        <div class=\"basic-data\">\n          <p  class=\"basic-text basic-text--white\" id=\"basic-info\"></p>\n      </div>\n    </section>\n    <section class=\"basic-container\">\n      <h3 class=\"basic-heading1 basic-heading1--white\" id=\"space-header\"></h3>\n      <ul class=\"basic-spaceSet\"id=\"basic-space-list\">\n      </ul>\n    </section>\n  </div>", "css": ".designportal .basic-heading1 {\n  font-size: 2rem;\n  font-weight: bold;\n  margin-bottom: 15px;\n  color: #FFFFFF;\n}\n\n@media screen and (max-width: 768px) {\n  .designportal .basic-heading1 {\n    font-size: 2.4rem;\n    margin: 0;\n    padding: 0 15px 5px 15px;\n  }\n}\n\n.designportal .basic-heading2 {\n  font-size: 1.8rem;\n  font-weight: bold;\n  margin: 20px 0 10px 0;\n  color: #FFFFFF;\n}\n\n@media screen and (max-width: 768px) {\n  .designportal .basic-heading2 {\n    font-size: 2rem;\n    padding: 10px 0 10px 0;\n    margin: 0;\n  }\n}\n\n.designportal .basic-heading3 {\n  margin: 20px 0 0 0;\n  font-size: 1.3rem;\n  font-weight: bold;\n  color: #FFFFFF;\n}\n\n@media screen and (max-width: 768px) {\n  .designportal .basic-heading3 {\n    font-size: 1.6rem;\n  }\n}\n\n.designportal .basic-text {\n  font-size: 1.2rem;\n  color: #FFFFFF;\n}\n\n@media screen and (max-width: 768px) {\n  .designportal .basic-text {\n    font-size: 1.6rem;\n  }\n}\n\n.designportal .basic-list-item {\n  font-size: 1.2rem;\n  color: #FFFFFF;\n}\n\n@media screen and (max-width: 768px) {\n  .designportal .basic-list-item {\n    font-size: 1.6rem;\n  }\n}\n\n.designportal .basic-app-name {\n  font-size: 1.2rem;\n  margin-top: 10px;\n  color: #FFFFFF;\n  text-align: center;\n}\n\n@media screen and (max-width: 768px) {\n  .designportal .basic-app-name {\n    font-size: 1.6rem;\n    text-align: left;\n    margin-top: 0;\n    margin-left: 10px;\n  }\n}\n\n.designportal .basic-space-name {\n  font-size: 1.2rem;\n  margin-top: 10px;\n  color: #FFFFFF;\n}\n\n@media screen and (max-width: 768px) {\n  .designportal .basic-space-name {\n    font-size: 1.6rem;\n    text-align: left;\n    margin-top: 0;\n    margin-left: 10px;\n  }\n}\n\n.designportal-basic {\n  display: block;\n  position: relative;\n  background-color: rgba(0, 0, 0, 0.4);\n}\n\n.designportal-basic h1, .designportal-basic h2, .designportal-basic h3, .designportal-basic ul, .designportal-basic ol, .designportal-basic p, .designportal-basic th, .designportal-basic td, .designportal-basic dl, .designportal-basic dt, .designportal-basic dd {\n  margin: 0;\n  padding: 0;\n}\n\n.designportal-basic ul {\n  list-style: disc;\n}\n\n.designportal-basic ol {\n  list-style: decimal;\n}\n\n.designportal {\n  background-image: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(\"https://static.cybozu.com/contents/k/image/ocean/cover/freshleaf.jpg\");\n  background-size: cover;\n  background-position: center;\n  background-attachment: fixed;\n}\n\n@media screen and (max-width: 768px) {\n  .designportal {\n    background-attachment: scroll;\n    background-position: center center;\n  }\n}\n\n.designportal .basic-container {\n  width: 1080px;\n  margin: 0 auto;\n  padding: 20px 0 20px;\n}\n\n.designportal .basic-container:last-child {\n  padding-bottom: 40px;\n}\n\n@media screen and (max-width: 1160px) {\n  .designportal .basic-container {\n    width: 96vw;\n    margin: 0 2vw;\n  }\n}\n\n@media screen and (max-width: 768px) {\n  .designportal .basic-container {\n    width: 100%;\n    margin: 0 auto;\n    padding: 20px 0 5px 0;\n  }\n}\n\n.designportal .basic-appSet, .designportal .basic-spaceSet, .designportal .basic-dataSet {\n  display: flex;\n  flex-wrap: wrap;\n  padding: 20px;\n  background-color: rgba(0, 0, 0, 0.4);\n  box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.05);\n  border-radius: 10px;\n  justify-content: center;\n}\n\n@media screen and (max-width: 768px) {\n  .designportal .basic-appSet, .designportal .basic-spaceSet, .designportal .basic-dataSet {\n    display: block;\n    box-shadow: none;\n    border-radius: 0;\n    padding: 0;\n  }\n}\n\n.designportal .basic-dataSet {\n  justify-content: normal;\n}\n\n@media screen and (max-width: 768px) {\n  .designportal .basic-dataSet {\n    padding: 15px 15px;\n  }\n}\n\n.designportal .basic-data {\n  display: block;\n  width: 100%;\n  list-style-type: none;\n  margin: 0 0 20px 0;\n}\n\n.designportal .basic-data-notifications {\n  margin: 0 0 10px 0;\n  text-align: left;\n}\n\n.designportal .basic-app {\n  display: block;\n  width: 168px;\n  margin: 20px;\n  list-style-type: none;\n}\n\n@media screen and (max-width: 1160px) {\n  .designportal .basic-app {\n    width: 16%;\n    margin: 2%;\n  }\n  .designportal .basic-app:first-child {\n    margin-left: 0;\n  }\n  .designportal .basic-app:last-child {\n    margin-right: 0;\n  }\n}\n\n@media screen and (max-width: 768px) {\n  .designportal .basic-app {\n    width: auto;\n    margin: 0;\n    padding: 10px 15px;\n    border-bottom: solid 1px #dddddd;\n  }\n  .designportal .basic-app:last-child {\n    border-bottom: none;\n  }\n}\n\n.designportal .basic-app-link, .designportal .basic-space-link {\n  display: block;\n  text-decoration: none;\n}\n\n@media screen and (max-width: 768px) {\n  .designportal .basic-app-link, .designportal .basic-space-link {\n    display: flex;\n    align-items: center;\n  }\n}\n\n.designportal .basic-app-link:hover, .designportal .basic-space-link:hover, .designportal .basic-app-link:focus, .designportal .basic-space-link:focus {\n  text-decoration: underline;\n  color: #FFFFFF;\n}\n\n.designportal .basic-app-link:focus, .designportal .basic-space-link:focus {\n  outline: #3498db solid 1px;\n}\n\n.designportal .basic-app-icon {\n  width: 100px;\n  height: 100px;\n  margin: 0 auto;\n  border-radius: 15px;\n}\n\n@media screen and (max-width: 768px) {\n  .designportal .basic-app-icon {\n    width: 40px;\n    height: 40px;\n    border-radius: 12px;\n    margin: 0;\n  }\n}\n\n.designportal .basic-app-icon-img {\n  display: block;\n  width: 75px;\n  height: 75px;\n  padding: 12.5px;\n  fill: #FFFFFF;\n}\n\n@media screen and (max-width: 768px) {\n  .designportal .basic-app-icon-img {\n    width: 30px;\n    height: 30px;\n    padding: 5px;\n  }\n}\n\n.designportal .basic-space {\n  display: block;\n  width: 220px;\n  margin: 20px;\n  list-style-type: none;\n}\n\n@media screen and (max-width: 1160px) {\n  .designportal .basic-space {\n    width: 46%;\n    margin: 1.9%;\n  }\n}\n\n@media screen and (max-width: 768px) {\n  .designportal .basic-space {\n    width: auto;\n    margin: 0;\n    padding: 10px 15px;\n    border-bottom: solid 1px #dddddd;\n  }\n  .designportal .basic-space:last-child {\n    border-bottom: none;\n  }\n}\n\n.designportal .basic-space-img-container {\n  height: 100px;\n  border-radius: 10px;\n}\n\n@media screen and (max-width: 1160px) {\n  .designportal .basic-space-img-container {\n    width: 100%;\n    height: 100px;\n  }\n}\n\n@media screen and (max-width: 768px) {\n  .designportal .basic-space-img-container {\n    width: 40px;\n    height: 40px;\n    border-radius: 12px;\n  }\n}\n\n.designportal .basic-space-img {\n  display: block;\n  height: 100px;\n  border-radius: 10px;\n  width: 100%;\n  height: 100px;\n  border-radius: 10px;\n  background-size: cover;\n  background-position: center;\n}\n\n@media screen and (max-width: 768px) {\n  .designportal .basic-space-img {\n    display: block;\n    width: 40px;\n    height: 40px;\n  }\n}\n.designportal .basic-list {\n  margin: 18px 0 18px 30px;\n}\n\n.designportal .basic-app-icon--blue {\n  background: linear-gradient(180deg, #F4CC70 0%, #DE7A22 100%);\n}\n\n.designportal .basic-app-icon--pink {\n  background: linear-gradient(180deg, #FF6EA2 0%, #E71F00 100%);\n}\n\n.designportal .basic-app-icon--green {\n  background: linear-gradient(180deg, #6FCF97 0%, #9fdbb9 100%);\n}\n\n.designportal .basic-app-icon--purple {\n  background: linear-gradient(180deg, #2988BC 0%, #2F496E 100%);\n}\n\n.designportal .basic-app-icon--orange {\n  background: linear-gradient(180deg, rgb(198, 221, 241) 0%, #a1d3ac 100%);\n}\n", "js": "//zackey_portal_manage\r\n(() => {\r\n    \r\n    var setting_APP = " + APPID + ";\r\n\r\n    function filesrc(filekey, ID, content) {\r\n\r\n        const b = navigator.userAgent.toLowerCase();\r\n\r\n        var apiurl = '/k/v1/file.json?fileKey=' + filekey;\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open('GET', apiurl, true);\r\n        xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\t//これが無いとIE,FFがNG\r\n        xhr.responseType = \"blob\";\r\n        var blob = xhr.responseType;\r\n        xhr.onload = function () {\r\n            //blobからURL生成\r\n            var blob = xhr.response;\r\n            var url = window.URL || window.webkitURL;\r\n            var image = url.createObjectURL(blob);\r\n\r\n            if (content == 'app') {\r\n\r\n                $('#APPID_' + ID + '_img_' + content).attr('src', image);\r\n\r\n            } else if (content == 'portal') {\r\n\r\n                //ブラウザで指定方法振り分け\r\n                if (b.indexOf(\"safari\") != -1 || b.indexOf(\"chrome\") != -1 || b.indexOf(\"ipad\") != -1 || b.indexOf(\"ipod\") != -1 || b.indexOf(\"iphone\") != -1 || b.indexOf(\"android\") != -1) {\r\n\r\n                    $('#portal-img-key').css({ 'background-image': '-webkit-linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(' + image + ')' });\r\n\r\n                } else if (ua.indexOf(\"firefox\")) {\r\n\r\n                    $('#portal-img-key').css({ 'background-image': '-moz-radial-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(' + image + ')' });\r\n\r\n                } else {\r\n\r\n                    $('#portal-img-key').css({ 'background-image': 'radial-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(' + image + ')' });\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                $('#SPACE_' + ID + '_img_' + content).attr('src', image);\r\n\r\n            }\r\n        };\r\n        xhr.send();\r\n\r\n    }\r\n\r\n    function Portal_header(array) {\r\n        const record = array[0];\r\n        $('#app-header').text(record['アプリ群タイトル'].value);\r\n        $('#space-header').text(record['スペースタイトル'].value);\r\n        $('#info-header').text(record['お知らせタイトル'].value);\r\n\r\n        filesrc(record['ポータル背景_画像'].value[0].fileKey, 0, 'portal');\r\n\r\n    }\r\n\r\n    function color_selector(b, ID, cl1, cl2, angle) {\r\n\r\n        //ブラウザで指定方法振り分け\r\n        if (b.indexOf(\"safari\") != -1 || b.indexOf(\"chrome\") != -1 || b.indexOf(\"ipad\") != -1 || b.indexOf(\"ipod\") != -1 || b.indexOf(\"iphone\") != -1 || b.indexOf(\"android\") != -1) {\r\n\r\n            $('#APP_' + ID + '_color').css({ 'background': '-webkit-linear-gradient(' + angle + 'deg, ' + cl1 + ' 0%, ' + cl2 + ' 100%)' });\r\n\r\n        } else if (ua.indexOf(\"firefox\")) {\r\n\r\n            $('#APP_' + ID + '_color').css({ 'background': '-moz-radial-gradient(' + angle + 'deg, ' + cl1 + cl2 + ' ' });\r\n\r\n        } else {\r\n\r\n            $('#APP_' + ID + '_color').css({ 'background': 'radial-gradient(' + angle + 'deg, ' + cl1 + cl2 + ')' });\r\n\r\n        }\r\n\r\n    }\r\n\r\n    function MakeAppList(r, cl, browser) {\r\n\r\n        let ID = r[\"アプリID\"].value;\r\n        let NAME = r['アプリ名'].value;\r\n        let FILE_KEY = r['アプリアイコン'].value[0].fileKey;\r\n\r\n        let VIEW = r['優先一覧ID'].value ? r['優先一覧ID'].value : null;\r\n\r\n        //要素作成\r\n        let list = document.createElement('li');\r\n        let a = document.createElement('a');\r\n        let div = document.createElement('div');\r\n        let img = document.createElement('img');\r\n        let p = document.createElement('p');\r\n\r\n        //構造作成\r\n        list.appendChild(a);\r\n        a.appendChild(div);\r\n        a.appendChild(p);\r\n        div.appendChild(img);\r\n\r\n        //クラス付与、各要素追加\r\n        $(list).addClass('basic-app');\r\n\r\n        $(a).addClass('basic-app-link');\r\n        a.href = location.origin + location.pathname + ID + '/';\r\n\r\n        if (VIEW != null) {\r\n            a.href += '?view=' + VIEW;\r\n        }\r\n\r\n        $(div).addClass('basic-app-icon');\r\n        $(div).addClass('basic-app-icon--color');\r\n        $(div).attr('id', 'APP_' + ID + '_color');\r\n\r\n        $(img).addClass('basic-app-icon-img');\r\n        $(img).attr('id', 'APPID_' + ID + '_img_app');\r\n\r\n        $(p).addClass('basic-app-name');\r\n        p.innerText = NAME;\r\n\r\n        $('#basic-app-list').append(list);\r\n\r\n        filesrc(FILE_KEY, ID, 'app');\r\n\r\n        color_selector(browser, ID, cl.first, cl.second, cl.angle);\r\n\r\n    }\r\n\r\n    function MakeSpaceList(ID, NAME, FILE_KEY) {\r\n\r\n        //要素作成\r\n        let list = document.createElement('li');\r\n        let a = document.createElement('a');\r\n        let div = document.createElement('div');\r\n        let img = document.createElement('img');\r\n        let p = document.createElement('p');\r\n\r\n        //構造作成\r\n        list.appendChild(a);\r\n        a.appendChild(div);\r\n        div.appendChild(img);\r\n        a.appendChild(p);\r\n\r\n        //クラス付与、各要素追加\r\n        $(list).addClass('basic-space');\r\n\r\n        $(a).addClass('basic-space-link');\r\n        if (location.pathname != '/k/m/') {\r\n            a.href = location.origin + location.pathname + '#/space/' + ID;\r\n        } else {\r\n            a.href = location.origin + location.pathname + 'space/' + ID;\r\n        }\r\n\r\n        $(div).addClass('basic-space-img-container');\r\n\r\n        $(img).addClass('basic-space-img');\r\n        $(img).attr('id', 'SPACE_' + ID + '_img_space');\r\n\r\n        $(p).addClass('basic-space-name');\r\n        p.innerText = NAME;\r\n\r\n        $('#basic-space-list').append(list);\r\n\r\n        filesrc(FILE_KEY, ID, 'space');\r\n\r\n    }\r\n\r\n    function Apps_shortcuts(array) {\r\n        const records = array;\r\n\r\n        const users_browser = navigator.userAgent.toLowerCase();\r\n\r\n        for (let i = 0; i < records.length; i++) {\r\n\r\n            const record = records[i];\r\n\r\n            const color = {\r\n                'angle': record['数値'].value,\r\n                'first': record['カラー1'].value,\r\n                'second': record['カラー2'].value,\r\n            };\r\n\r\n            MakeAppList(record, color, users_browser);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    function Information(array) {\r\n        const records = array;\r\n\r\n        let box = document.createElement('div');\r\n        box.innerHTML = records[0]['お知らせ内容'].value;\r\n\r\n        $(box).appendTo($('#basic-info'));\r\n    }\r\n\r\n    function Spaces_shortcuts(array) {\r\n        const records = array;\r\n\r\n        for (let i = 0; i < records.length; i++) {\r\n\r\n            const record = records[i];\r\n\r\n            MakeSpaceList(record['スペースID'].value, record['スペース名'].value, record['スペースアイコン'].value[0].fileKey);\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    var setting_body = {\r\n        'app': setting_APP,\r\n        'query': 'order by 管理番号 asc, アプリ優先順位 asc, スペース優先順位 asc,更新日時 desc limit 100 offset 0'\r\n    };\r\n\r\n    kintone.api(kintone.api.url('/k/v1/records', true), 'GET', setting_body, function (resp) {\r\n\r\n        const records = resp.records;\r\n\r\n        //各種レコード枠\r\n        const portal = [];\r\n        const info = [];\r\n        const apps = [];\r\n        const space = [];\r\n\r\n        //レコード判別,格納\r\n        for (let de = 0; de < records.length; de++) {\r\n            switch (Number(records[de]['管理番号'].value)) {\r\n\r\n                case 0:\r\n                    portal.push(records[de]);\r\n                    break;\r\n\r\n                case 1:\r\n                    info.push(records[de]);\r\n                    break;\r\n\r\n                case 2:\r\n                    apps.push(records[de]);\r\n                    break;\r\n\r\n                case 3:\r\n                    space.push(records[de]);\r\n                    break;\r\n            }\r\n        }\r\n\r\n        //ポータルヘッダー設定\r\n        Portal_header(portal);\r\n\r\n        Apps_shortcuts(apps);\r\n\r\n        Information(info);\r\n\r\n        Spaces_shortcuts(space);\r\n\r\n    }, function (error) {\r\n        console.log(error);\r\n    });\r\n})();", "headerColor": "", "toolbarColor": "", "hiddenPortalHeader": false, "portalHeaderColor": "", "customize_version": 1 };

  const KINTONE_PORTAL_DESIGNER_HTML = "kintone-portal-designer-html";
  const KINTONE_PORTAL_DESIGNER_CSS = "kintone-portal-designer-css";
  const KINTONE_PORTAL_DESIGNER_JS = "kintone-portal-designer-js";

  function addCustomizedContentTo(model, entryPointEl) {
    const styleEl = document.createElement("style");
    styleEl.innerHTML = model.css;
    styleEl.classList.add(KINTONE_PORTAL_DESIGNER_CSS);
    entryPointEl.appendChild(styleEl);

    const innerEl = document.createElement("div");
    innerEl.innerHTML = model.html;
    innerEl.classList.add(KINTONE_PORTAL_DESIGNER_HTML);
    entryPointEl.appendChild(innerEl);

    const scriptEl = document.createElement("script");
    scriptEl.innerHTML = model.js;
    scriptEl.classList.add(KINTONE_PORTAL_DESIGNER_JS);

    entryPointEl.appendChild(scriptEl);
  }

  function removeCustomizedContent() {
    const customizedEls = [
      document.getElementsByClassName(KINTONE_PORTAL_DESIGNER_JS)[0],
      document.getElementsByClassName(KINTONE_PORTAL_DESIGNER_HTML)[0],
      document.getElementsByClassName(KINTONE_PORTAL_DESIGNER_CSS)[0]
    ];
    customizedEls
      .filter(function (el) {
        return !!el;
      })
      .forEach(function (el) {
        el.parentNode.removeChild(el);
      });
  }

  kintone.events.on("mobile.portal.show", function () {
    removeCustomizedContent();
    addCustomizedContentTo(
      renderingModel,
      kintone.mobile.portal.getContentSpaceElement()
    );
  });
})();